mixed-port: 7890
allow-lan: false
mode: rule
log-level: info
ipv6: false
enable-process: true
find-process-mode: strict
tcp-concurrent: false
unified-delay: true
global-client-fingerprint: chrome
keep-alive-interval: 25
profile:
  store-selected: true
  store-fake-ip: true
dns:
  enable: true
  listen: :53
  enhanced-mode: fake-ip
  fake-ip-range: 198.18.0.1/16
  fake-ip-filter:
    - +.lan
    - +.local
    - +.localhost
    - +.localdomain
    - +.ip6-localhost
    - +.ip6-loopback
    - "*.example"
    - "*.invalid"
    - "*.test"
    - "*.home.arpa"
    - time.nist.gov
    - time.windows.com
    - time.android.com
    - pool.ntp.org
    - time.*.com
    - ntp.*.com
  default-nameserver:
    - system
    - https://8.8.8.8/dns-query
  direct-nameserver:
    - system
    - https://dns.google/dns-query
    - https://free.shecan.ir/dns-query
  nameserver:
    - https://dns.quad9.net/dns-query
    - https://cloudflare-dns.com/dns-query
    - https://dns.google/dns-query
  proxy-server-nameserver:
    - system
    - https://dns.umbrella.com/dns-query
    - https://dns.google/dns-query
    - https://evn01.dnscry.pt/dns-query
  direct-nameserver-follow-policy: false
  prefer-h3: false
  respect-rules: false
  use-hosts: true
  use-system-hosts: true
tun:
  enable: true
  stack: system
  dns-hijack:
    - any:53
  auto-route: true
  auto-detect-interface: true
  strict-route: true
  device: Mihomo
sniffer:
  enable: true
  parse-pure-ip: true
  override-destination: false
  sniff:
    TLS:
      ports:
        - 443
        - 8443
    QUIC:
      ports:
        - 443
        - 8443
    HTTP:
      ports:
        - 80
        - 8080-8880
      override-destination: true
  sniffing:
    - tls
    - http
    - quic
proxy-providers:
  q:
    type: http
    url: https://raw.githubusercontent.com/liketolivefree/kobabi/main/prov_clash.yaml
    interval: 3600
    path: ./proxy-providers/q.yaml
    health-check:
      enable: true
      interval: 900
      url: https://www.gstatic.com/generate_204
      timeout: 5000
    override:
      udp: true
      skip-cert-verify: true
  a:
    type: http
    url: https://raw.githubusercontent.com/10ium/ClashFactory/main/providers/10ium-HiN-VPN.txt
    interval: 3600
    path: ./proxy-providers/a.yaml
    health-check:
      enable: true
      interval: 900
      url: https://www.gstatic.com/generate_204
      timeout: 5000
    exclude-type: ss|http|trojan|vmess
    exclude-filter: IR|CN|iran|china|(iran)|(china)
    override:
      udp: true
      skip-cert-verify: true
  b:
    type: http
    url: https://raw.githubusercontent.com/10ium/ClashFactory/main/providers/10ium-config-fetcher.txt
    interval: 3600
    path: ./proxy-providers/b.yaml
    health-check:
      enable: true
      interval: 900
      url: https://www.gstatic.com/generate_204
      timeout: 5000
    exclude-type: ss|http|trojan|vmess
    exclude-filter: IR|CN|iran|china|(iran)|(china)
    override:
      udp: true
      skip-cert-verify: true
  c:
    type: http
    url: https://raw.githubusercontent.com/Mosifree/-FREE2CONFIG/main/Clash_Movaghat
    interval: 3600
    path: ./proxy-providers/c.yaml
    health-check:
      enable: true
      interval: 900
      url: https://www.gstatic.com/generate_204
      timeout: 5000
    exclude-type: ss|http|trojan|vmess
    exclude-filter: IR|CN|iran|china|(iran)|(china)
    override:
      udp: true
      skip-cert-verify: true
  d:
    type: http
    url: https://raw.githubusercontent.com/xtoolkit/TVC/main/subscriptions/meta/mix
    interval: 3600
    path: ./proxy-providers/d.yaml
    health-check:
      enable: true
      interval: 900
      url: https://www.gstatic.com/generate_204
      timeout: 5000
    exclude-type: ss|http|trojan|vmess
    exclude-filter: IR|CN|iran|china|(iran)|(china)
    override:
      udp: true
      skip-cert-verify: true
proxy-groups:
  - name: QQOLI
    type: select
    proxies:
      - MMOBI
    use:
      - q
  - name: MMOBI
    type: url-test
    url: https://www.gstatic.com/generate_204
    interval: 400
    tolerance: 0
    use:
      - q
      - c
      - d
rule-providers:
  aff:
    type: http
    behavior: domain
    format: mrs
    url: https://raw.githubusercontent.com/liketolivefree/kobabi/main/aff.mrs
    path: ./rule-providers/aff.mrs
    interval: 86400
  yun:
    type: http
    behavior: ipcidr
    format: mrs
    url: https://raw.githubusercontent.com/liketolivefree/kobabi/main/yun.mrs
    path: ./rule-providers/yun.mrs
    interval: 86400
  oki:
    type: http
    behavior: domain
    format: mrs
    url: https://raw.githubusercontent.com/liketolivefree/kobabi/main/oki.mrs
    path: ./rule-providers/oki.mrs
    interval: 86400
  doki:
    type: http
    behavior: ipcidr
    format: mrs
    url: https://raw.githubusercontent.com/liketolivefree/kobabi/main/doki.mrs
    path: ./rule-providers/doki.mrs
    interval: 86400
  xal:
    type: http
    behavior: domain
    format: mrs
    url: https://raw.githubusercontent.com/liketolivefree/kobabi/main/xal.mrs
    path: ./rule-providers/xal.mrs
    interval: 86400
  loo:
    type: http
    behavior: ipcidr
    format: mrs
    url: https://raw.githubusercontent.com/liketolivefree/kobabi/main/loo.mrs
    path: ./rule-providers/loo.mrs
    interval: 86400
rules:
  - IP-CIDR,10.10.34.0/24,REJECT,no-resolve
  - DOMAIN-SUFFIX,lan,DIRECT
  - DOMAIN-SUFFIX,local,DIRECT
  - DOMAIN-SUFFIX,localdomain,DIRECT
  - DOMAIN-SUFFIX,localhost,DIRECT
  - RULE-SET,aff,REJECT
  - RULE-SET,yun,REJECT,no-resolve
  - DOMAIN-SUFFIX,ir,DIRECT
  - RULE-SET,xal,DIRECT
  - RULE-SET,oki,QQOLI
  - RULE-SET,loo,DIRECT,no-resolve
  - RULE-SET,doki,QQOLI,no-resolve
  - MATCH,QQOLI
external-controller: ""
socks-port: 7891
port: 7892
geo-auto-update: false
geo-update-interval: 90
geodata-mode: false
geox-url:
  geoip: https://github.com/Chocolate4u/Iran-v2ray-rules/releases/latest/download/geoip.dat
  geosite: https://github.com/Chocolate4u/Iran-v2ray-rules/releases/latest/download/geosite.dat
  mmdb: https://github.com/Chocolate4u/Iran-clash-rules/releases/latest/download/geoip.metadb
  asn: https://github.com/Chocolate4U/Iran-v2ray-rules/raw/geolite2/GeoLite2-ASN.mmdb
hosts:
  "localhost": ["127.0.0.1", "::1"]
  "localhost.localdomain": "127.0.0.1"
  "local": "127.0.0.1"
  "broadcasthost": "255.255.255.255"
  "raw.githubusercontent.com": ["185.199.108.133", "185.199.109.133", "185.199.110.133", "185.199.111.133", "2606:50c0:8000::154", "2606:50c0:8001::154", "2606:50c0:8002::154", "2606:50c0:8003::154"]
  "dns.google": ["8.8.8.8", "8.8.4.4", "2001:4860:4860::8888", "2001:4860:4860::8844"]
  "cloudflare-dns.com": ["104.16.249.249", "104.16.248.249", "2606:4700::6810:f8f9", "2606:4700::6810:f9f9"]
  "1dot1dot1dot1.cloudflare-dns.com": ["1.1.1.1", "1.0.0.1", "2606:4700:4700::1111", "2606:4700:4700::1001"]
  "one.one.one.one": ["1.1.1.1", "1.0.0.1", "2606:4700:4700::1111", "2606:4700:4700::1001"]
  "security.cloudflare-dns.com": ["1.1.1.2", "1.0.0.2", "2606:4700:4700::1112", "2606:4700:4700::1002"]
  "family.cloudflare-dns.com": ["1.1.1.3", "1.0.0.3", "2606:4700:4700::1113", "2606:4700:4700::1003"]
  "engage.cloudflareclient.com": ["162.159.192.1", "2606:4700:d0::a29f:c001"]
  "dns.quad9.net": ["9.9.9.9", "149.112.112.112", "2620:fe::fe", "2620:fe::9"]
  "dns9.quad9.net": ["9.9.9.9", "149.112.112.9", "2620:fe::9", "2620:fe::fe:9"]
  "dns10.quad9.net": ["9.9.9.10", "149.112.112.10", "2620:fe::10", "2620:fe::fe:10"]
  "dns11.quad9.net": ["9.9.9.11", "149.112.112.11", "2620:fe::11", "2620:fe::fe:11"]
  "dns12.quad9.net": ["9.9.9.12", "149.112.112.12", "2620:fe::12", "2620:fe::fe:12"]
  "dns.adguard-dns.com": ["94.140.14.14", "94.140.15.15", "2a10:50c0::ad1:ff", "2a10:50c0::ad2:ff"]
  "unfiltered.adguard-dns.com": ["94.140.14.140", "94.140.14.141", "2a10:50c0::1:ff", "2a10:50c0::2:ff"]
  "family.adguard-dns.com": ["94.140.14.15", "94.140.15.16", "2a10:50c0::bad1:ff", "2a10:50c0::bad2:ff"]
  "dns.opendns.com": ["208.67.220.220", "208.67.222.222", "2620:119:35::35", "2620:119:53::53"]
  "dns.umbrella.com": ["208.67.220.220", "208.67.222.222", "2620:119:35::35", "2620:119:53::53"]
  "dns.sse.cisco.com": ["208.67.220.220", "208.67.222.222", "2620:119:35::35", "2620:119:53::53"]
  "doh.opendns.com": ["146.112.41.2", "2620:119:fc::2"]
  "doh.sse.cisco.com": ["146.112.41.2", "2620:119:fc::2"]
  "doh.familyshield.opendns.com": ["146.112.41.3", "2620:119:fc::3"]
  "doh.sandbox.opendns.com": ["146.112.41.3", "2620:119:fc::3"]
  "doh.umbrella.com": ["146.112.41.5", "2620:119:fc::5"]
  "familyshield.opendns.com": ["208.67.220.123", "208.67.222.123", "2620:119:35::123", "2620:119:53::123"]
  "familyshield.sse.cisco.com": ["208.67.220.123", "208.67.222.123", "2620:119:35::123", "2620:119:53::123"]
  "sandbox.opendns.com": ["208.67.220.2", "208.67.222.2", "2620:0:ccc::2", "2620:0:ccd::2"]
  "sandbox.sse.cisco.com": ["208.67.220.2", "208.67.222.2", "2620:0:ccc::2", "2620:0:ccd::2"]
  "dns.mullvad.net": "194.242.2.2"
  "adblock.dns.mullvad.net": "194.242.2.3"
  "base.dns.mullvad.net": "194.242.2.4"
  "doh.cleanbrowsing.org": ["185.228.168.10", "185.228.168.168"]
  "security-filter-dns.cleanbrowsing.org": "185.228.168.9"
  "security-filter-dns2.cleanbrowsing.org": "185.228.169.9"
  "doh.applied-privacy.net": ["146.255.56.98", "2a02:1b8:10:234::2"]
  "dot1.applied-privacy.net": ["146.255.56.98", "2a02:1b8:10:234::2"]
  "evn01.dnscry.pt": ["85.90.207.199", "2a03:90c0:5f1:2903::539"]
  "fra01.dnscry.pt": ["45.82.120.61", "2a0e:6a80:3:669::"]
  "sof01.dnscry.pt": ["79.124.7.43", "2a01:8740:1:863::3b8c"]
  "muc01.dnscry.pt": ["194.39.205.10", "2a0c:8fc0:1749:66:18::16"]
  "de-dus.doh.sb": ["62.133.35.15", "2a09:0:8::15"]
  "de-fra.doh.sb": ["147.78.178.170", "147.78.178.171", "147.78.178.172", "147.78.178.173", "147.78.178.174", "2a09:0:1:a::a"]
  "ru-mow.doh.sb": ["23.105.231.66", "2a05:93c2:1001:101a:f816:3eff:fe81:8ef4"]
  "de-ber.doh.sb": ["45.142.247.194", "2a12:8d02:2100:2ac:5054:ff:fe09:8539"]
  "doh.dns.sb": ["104.128.62.173", "2602:ffbb:100:4::2"]
  "doh.sb": ["185.222.222.222", "45.11.45.11", "2a11::", "2a09::"]
  "dns.sb": ["45.11.45.11", "185.222.222.222", "2a11::", "2a09::"]
  "dot.sb": ["45.11.45.11", "185.222.222.222", "2a11::", "2a09::"]
  "dns.alidns.com": ["223.6.6.6", "223.5.5.5", "2400:3200::1", "2400:3200:baba::1"]
  "public1.114dns.com": "114.114.114.114"
  "public2.114dns.com": "114.114.115.115"
  "anti-malware-1.114dns.com": "114.114.114.119"
  "anti-malware-2.114dns.com": "114.114.115.119"
  "pdns.dnspod.cn": ["119.28.28.28", "119.29.29.29", "120.53.71.88", "106.55.120.91"]
  "cdns01.comcast.net": ["75.75.75.75", "2001:558:feed::1"]
  "cdns02.comcast.net": ["75.75.76.76", "2001:558:feed::2"]
  "rec1pubns1.ultradns.net": ["64.6.64.6", "2620:74:1b::1:1"]
  "rec1pubns2.ultradns.net": ["64.6.65.6", "2620:74:1c::2:2"]
  "dns.yandex.net": ["77.88.8.8", "77.88.8.1", "2a02:6b8::feed:0ff", "2a02:6b8:0:1::feed:0ff"]
  "dot.pub": ["1.12.12.12", "120.53.53.53"]
  "doh.pub": ["1.12.12.12", "120.53.53.53"]
  "recursive1.dci.ir": "217.218.127.127"
  "recursive2.dci.ir": "217.218.155.155"
  "free.shecan.ir": ["178.22.122.100", "178.22.122.101"]
  "dns.shecan.ir": ["178.22.122.100", "178.22.122.101"]
  "pro.shecan.ir": ["178.22.122.100", "178.22.122.101"]
  "th1.dnsfinder.ir": ["193.151.154.125", "2a05:1a30:1:2::58e"]
  "dns.kcolspacrm.ir": ["185.143.233.121", "185.143.233.235", "185.143.234.121", "185.143.234.235"]
  "dns-cache1.rasana.net": "85.15.1.14"
  "dns-cache2.rasana.net": "85.15.1.15"
  "dns.pishgaman.net": "5.202.100.100"
  "dns.farakaft.ir": "5.144.135.9"
  "dns.electrotm.org": "78.157.42.100"
