{
  "log": {
    "level": "panic"
  },
  "dns": {
    "servers": [
      {"tag": "local_dns", "type": "local"},
      {"tag": "remote_dns", "type": "https", "server": "cloudflare-dns.com", "domain_resolver": "hosts_dns", "detour": "qqoli"},
      {"tag": "hosts_dns", "type": "hosts", "predefined": {"dns.google": ["8.8.8.8", "8.8.4.4", "2001:4860:4860::8888", "2001:4860:4860::8844"], "cloudflare-dns.com": ["104.16.249.249", "104.16.248.249", "2606:4700::6810:f8f9", "2606:4700::6810:f9f9"], "dns.quad9.net": ["9.9.9.9", "149.112.112.112", "2620:fe::fe", "2620:fe::9"], "dns.umbrella.com": ["208.67.220.220", "208.67.222.222", "2620:119:35::35", "2620:119:53::53"], "raw.githubusercontent.com": ["185.199.108.133", "185.199.109.133", "185.199.110.133", "185.199.111.133", "2606:50c0:8000::154", "2606:50c0:8001::154", "2606:50c0:8002::154", "2606:50c0:8003::154"], "localhost": ["127.0.0.1", "::1"], "localhost.localdomain": "127.0.0.1", "local": "127.0.0.1", "broadcasthost": "255.255.255.255"}}      
    ],
    "rules": [
      {"domain_suffix": "raw.githubusercontent.com", "server": "local_dns"},
      {"ip_accept_any": true, "server": "hosts_dns"}
    ],
    "final": "remote_dns",
    "independent_cache": true,
    "strategy": "prefer_ipv4"
  },
  "inbounds": [
    {
      "type": "tun",
      "tag": "tun-in",
      "interface_name": "tun0",
      "mtu": 9000,
      "address": "172.19.0.1/30",
      "auto_route": true,
      "strict_route": true,
      "stack": "system",
      "platform": {"http_proxy": {"enabled": true, "server": "127.0.0.1", "server_port": 7990}}
    },
    {"type": "mixed", "tag": "mixed-in", "listen": "127.0.0.1", "listen_port": 7991}
  ],
  "outbounds": [
    {"type": "selector", "tag": "qqoli", "outbounds": ["mmobi", "{all}"], "default": "mmobi"},
    {"type": "urltest", "tag": "mmobi", "outbounds": ["{all}"], "url": "https://www.gstatic.com/generate_204", "interval": "6m0s"},
    {"type": "direct", "tag": "direct"}
  ],
  "route": {
    "final": "qqoli",
    "auto_detect_interface": true,
    "default_domain_resolver": "local_dns",
    "rules": [
      {"inbound": "tun-in", "action": "sniff", "timeout": "500ms"},
      {"inbound": "mixed-in", "action": "sniff", "timeout": "500ms"},
      {"inbound": "tun-in", "action": "resolve", "strategy": "prefer_ipv4"},
      {"inbound": "mixed-in", "action": "resolve", "strategy": "prefer_ipv4"},
      {"protocol": "dns","action": "hijack-dns"},
      {"port": 53, "action": "hijack-dns"},
      {"protocol": "stun", "action": "reject"},
      {"ip_cidr": ["224.0.0.0/3", "10.10.34.0/24"], "action": "reject"},
      {"rule_set": "aff_l", "action": "reject"},
      {"rule_set": "yun", "action": "reject"},
      {"ip_is_private": true, "outbound": "direct"},
      {"domain_suffix": ".ir", "outbound": "direct"},
      {"rule_set": "xal", "outbound": "direct"},
      {"rule_set": "loo", "outbound": "direct"},
      {"rule_set": "oki", "outbound": "qqoli"},
      {"rule_set": "doki", "outbound": "qqoli"}
    ],
    "rule_set": [
      {
        "type": "remote",
        "tag": "aff_l",
        "format": "binary",
        "url": "https://raw.githubusercontent.com/liketolivefree/kobabi/main/aff_l.srs",
        "download_detour": "direct"
      },
      {
        "type": "remote",
        "tag": "yun",
        "format": "binary",
        "url": "https://raw.githubusercontent.com/liketolivefree/kobabi/main/yun.srs",
        "download_detour": "direct"
      },
      {
        "type": "remote",
        "tag": "oki",
        "format": "binary",
        "url": "https://raw.githubusercontent.com/liketolivefree/kobabi/main/oki.srs",
        "download_detour": "direct"
      },
      {
        "type": "remote",
        "tag": "doki",
        "format": "binary",
        "url": "https://raw.githubusercontent.com/liketolivefree/kobabi/main/doki.srs",
        "download_detour": "direct"
      },
      {
        "type": "remote",
        "tag": "xal",
        "format": "binary",
        "url": "https://raw.githubusercontent.com/liketolivefree/kobabi/main/xal.srs",
        "download_detour": "direct"
      },
      {
        "type": "remote",
        "tag": "loo",
        "format": "binary",
        "url": "https://raw.githubusercontent.com/liketolivefree/kobabi/main/loo.srs",
        "download_detour": "direct"
      }
    ]
  },
  "experimental": {"cache_file": {"enabled": true}}
}
