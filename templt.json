{
  "log":{
    "level":"info",
    "timestamp":true
  },
  "dns":{
    "servers":[
      {"address":"local","tag":"local-dns","detour":"direct"},
      {"address":"https://8.8.8.8/dns-query","tag":"direct-dns","detour":"qqoli"},
      {"address":"https://1.1.1.1/dns-query","tag":"remote-dns","detour":"qqoli"}
    ],
    "rules":[
      {"server": "local-dns","outbound":"any","disable_cache":false},
      {"action":"reject","method":"default","no_drop":false,"rule_set":"aff"},
      {"action":"route","server":"direct-dns","domain_suffix":".ir"},
      {"action":"route","server":"direct-dns","rule_set":"xal"},
      {"action":"route","server":"remote-dns","rule_set":"oki"}
    ],
    "final":"remote-dns",
    "strategy":"prefer_ipv4",
    "disable_cache": false
  },
  "ntp":{"enabled":true,"interval":"30m","server":"pool.ntp.org","server_port":123,"detour":"direct"},
  "inbounds":[
    {
      "type":"tun",
      "tag":"tun-in",
      "interface_name":"tun0",
      "mtu":9000,
      "address":"172.19.0.1/30",
      "auto_route":true,
      "strict_route":true,
      "stack":"mixed",
      "platform":{"http_proxy":{"enabled":true,"server":"127.0.0.1","server_port":7890}},
      "endpoint_independent_nat": true
    },
    {"type":"mixed","tag":"mixed-in","listen":"127.0.0.1","listen_port":7891}
  ],
  "outbounds":[
    {"type":"selector","tag":"qqoli","outbounds":["mmobi","{all}"]},
    {"type":"urltest","tag":"mmobi","outbounds":["{all}"],"url":"https://www.gstatic.com/generate_204","interval":"5m","tolerance":50},
    {"type":"direct","tag":"direct"}
  ],
  "route":{
    "rules":[
      {"action":"sniff","sniffer":["http","tls","dns"],"timeout":"500ms","inbound":"tun-in"},
      {"action":"sniff","sniffer":["http","tls","dns"],"timeout":"500ms","inbound":"mixed-in"},
      {"action":"resolve","strategy":"prefer_ipv4","inbound":"tun-in"},
      {"action":"resolve","strategy":"prefer_ipv4","inbound":"mixed-in"},
      {"action":"hijack-dns","type":"logical","mode":"or","rules":[{"protocol":"dns"},{"port":53}]},
      {"action":"reject","method":"default","no_drop":false,"protocol":"quic"},
      {"action":"reject","method":"default","no_drop":false,"type":"logical","mode":"and","rules":[{"network":"tcp"},{"port":853}]},
      {"action":"reject","method":"default","no_drop":false,"type":"logical","mode":"and","rules":[{"network":"udp"},{"port":443}]},
      {"action":"reject","method":"default","no_drop":false,"rule_set":["aff","yun"]},
      {"action":"route","outbound":"direct","domain_suffix":".ir"},
      {"action":"route","outbound":"direct","rule_set":["xal","loo"]},
      {"action":"route","outbound":"qqoli","rule_set":["oki","doki"]}
    ],
    "rule_set":[
      {
        "type":"remote",
        "tag":"aff",
        "format":"binary",
        "url":"https://raw.githubusercontent.com/liketolivefree/kobabi/main/aff.srs",
        "download_detour":"direct"
      },
      {
        "type":"remote",
        "tag":"yun",
        "format":"binary",
        "url":"https://raw.githubusercontent.com/liketolivefree/kobabi/main/yun.srs",
        "download_detour":"direct"
      },
      {
        "type":"remote",
        "tag":"oki",
        "format":"binary",
        "url":"https://raw.githubusercontent.com/liketolivefree/kobabi/main/oki.srs",
        "download_detour":"direct"
      },
      {
        "type":"remote",
        "tag":"doki",
        "format":"binary",
        "url":"https://raw.githubusercontent.com/liketolivefree/kobabi/main/doki.srs",
        "download_detour":"direct"
      },
      {
        "type":"remote",
        "tag":"xal",
        "format":"binary",
        "url":"https://raw.githubusercontent.com/liketolivefree/kobabi/main/xal.srs",
        "download_detour":"direct"
      },
      {
        "type":"remote",
        "tag":"loo",
        "format":"binary",
        "url":"https://raw.githubusercontent.com/liketolivefree/kobabi/main/loo.srs",
        "download_detour":"direct"
      }
    ],
    "final":"qqoli",
    "auto_detect_interface":true,
    "override_android_vpn":true
  },
  "experimental":{
    "cache_file":{"enabled":true},
    "clash_api":{
      "external_controller":"127.0.0.1:9090",
      "external_ui":"dashboard",
      "external_ui_download_url":"https://gh-proxy.com/https://github.com/MetaCubeX/Yacd-meta/archive/gh-pages.zip",
      "external_ui_download_detour":"direct",
      "default_mode":"rule",
      "access_control_allow_origin":["http://127.0.0.1","https://yacd.metacubex.one"],
      "access_control_allow_private_network":true
    }
  }
}
